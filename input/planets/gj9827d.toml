# PROTEUS configuration file (version 2.0)

version = "2.0"

# ----------------------------------------------------
# Parameters
[params]
    # output files
    [params.out]
        path        = "gj9827d_oxid_poor_force"
        logging     = "INFO"
        plot_mod    = 100
        write_mod   = 5

     # time-stepping
    [params.dt]
        minimum      = 1e4    # absolute minimum time-step [years]
        minimum_rel  = 2e-2   # relative minimum time-step [dimensionless]
        maximum      = 5e8    # maximum time-step [yr]
        initial      = 3e1    # inital step size [yr]
        starspec     = 1e10    # interval to re-calculate the stellar spectrum [yr]
        starinst     = 1e1    # interval to re-calculate the instellation [yr]
        method       = "adaptive"  # proportional | adaptive | maximum

        [params.dt.proportional]
            propconst    = 52.0   # Proportionality constant

        [params.dt.adaptive]
            atol         = 0.05   # Step size atol
            rtol         = 0.15   # Step size rtol


    # required time constraints
    [params.stop.time]
        enabled = true
        minimum = 1.0e3      # model will certainly run to t > minimum [yr]
        maximum = 10e9   # model will terminate when t > maximum [yr]

    # solidification
    [params.stop.solid]
        enabled  = false
        phi_crit = 0.01      # non-dim., model will terminate when global melt fraction < phi_crit

    # radiative equilibrium
    [params.stop.radeqm]
        enabled = false
        atol    = 0.2        # absolute tolerance [W m-2]
        rtol    = 1e-3       # relative tolerance

    [params.stop.escape]
        enabled = true
        p_stop  = 5.0        # Stop surface pressure is less than this value

# ----------------------------------------------------
# Star
[star]

    mass    = 0.606      # M_sun
    age_ini = 0.100     # Gyr, model initialisation/start age

    module  = "mors"
    [star.mors]
        rot_pcntle = 50.0      # rotation rate
        tracks  = "spada"       # evolution tracks: spada | baraffe
        age_now = 10.0          # Gyr, current age of star used for scaling
        spec    = "stellar_spectra/Named/hd85512.txt" # stellar spectrum

# Orbital system
[orbit]
    semimajoraxis   = 0.0563    # AU
    eccentricity    = 0.00      # dimensionless
    zenith_angle    = 54.74     # degrees
    s0_factor       = 0.25      # dimensionless

    module  = "none"

# Planetary structure - physics table
[struct]
    mass_tot    = 3.02       # M_earth
    corefrac    = 0.55      # non-dim., radius fraction

# Atmosphere - physics table
[atmos_clim]
    surface_d       = 0.01      # m, conductive skin thickness
    surface_k       = 2.0       # W m-1 K-1, conductive skin thermal conductivity
    surf_state      = "skin"    # surface scheme: "mixed_layer" | "fixed" | "skin"
    surf_greyalbedo = 0.2       # surface grey albedo
    rayleigh        = true      # Enable rayleigh scattering

    module  = "agni"           # Which atmosphere module to use

    [atmos_clim.agni]
        p_top           = 1.0e-5        # bar, top of atmosphere grid pressure
        spectral_group  = "Honeyside"   # which gas opacities to include
        spectral_bands  = "48"         # how many spectral bands?
        num_levels      = 50            # Number of atmospheric grid levels
        chemistry       = "eq"        # "none" | "eq"
        surf_material   = "greybody"    # surface material file for scattering
        solve_energy    = true         # solve for energy-conserving atmosphere profile
        solution_atol   = 1e-1          # solver absolute tolerance
        solution_rtol   = 8e-2          # solver relative tolerance
        overlap_method  = "ee"          # gas overlap method
        condensation    = false          # volatile condensation
        real_gas        = false          # use real-gas equations of state

    [atmos_clim.dummy]
        gamma = 0.9

# Volatile escape - physics table
[escape]
    module = "zephyrus"    # Which escape module to use

    [escape.zephyrus]
        Pxuv        = 5e-5          # Pressure at which XUV radiation become opaque in the planetary atmosphere [bar]
        efficiency  = 0.1           # Escape efficiency factor
        tidal       = false         # Tidal contribution enabled

# Interior - physics table
[interior]
    radiogenic_heat = true  # enable radiogenic heat production
    tidal_heat      = false  # enable tidal heat production

    module = "spider"   # Which interior module to use

    [interior.spider]
        num_levels      = 180       # Number of SPIDER grid levels
        mixing_length   = 2         # Mixing length parameterization
        tolerance       = 1e-10      # absolute solver tolerance
        tolerance_rel   = 1e-9      # relative solver tolerance
        tsurf_atol      = 5.0      # tsurf_poststep_change
        tsurf_rtol      = 0.02      # tsurf_poststep_change_frac
        ini_entropy     = 3100.0    # Surface entropy conditions [J K-1 kg-1]
        ini_dsdr        = -4.698e-6 # Interior entropy gradient [J K-1 kg-1 m-1]

    [interior.aragog]
        logging         = "ERROR"
        num_levels      = 120       # Number of Aragog grid levels
        tolerance       = 1.0e-10   # solver tolerance
        ini_tmagma      = 3000.0    # Initial magma surface temperature [K]

    [interior.dummy]
        ini_tmagma      = 3500.0    # Initial magma surface temperature [K]

# Outgassing - physics table
[outgas]
    fO2_shift_IW    = 4         # log10(Î”IW), atmosphere/interior boundary oxidation state
    module = "calliope"         # Which outgassing module to use

     [outgas.calliope]
        solubility   = false    # enable solubility?
        T_floor      = 700.0    # Temperature floor applied to outgassing calculation [K].


# Volatile delivery - physics table
[delivery]
    initial = 'elements'        # "elements" | "volatiles"

    module = "none"

    # Set initial volatile inventory by planetary element abundances
    [delivery.elements]
        H_ppmw      = 1e4       # Hydrogen inventory in ppmw relative to mantle mass
        CH_ratio    = 1.0       # C/H mass ratio in mantle/atmosphere system
        NH_ratio    = 0.1       # N/H mass ratio in mantle/atmosphere system
        SH_ratio    = 2.0       # S/H mass ratio in mantle/atmosphere system

# Calculate simulated observations
[observe]
    synthesis = "none"

[atmos_chem]
    module = "none"
